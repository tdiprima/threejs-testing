<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>BoxGeometry Raycasting Example</title>
  <!-- Use Raycaster object to check for intersections between ray and box. -->
  <!-- Add event listener for mouse movements, which updates the mouse position. -->
  <link rel="stylesheet" href="/css/main.css">
  <script src="/build/three.min.js"></script>
</head>
<body>
<script>
  // Create a scene
  let scene = new THREE.Scene();

  // Create a camera
  let camera = new THREE.PerspectiveCamera(
    75, // field of view
    window.innerWidth / window.innerHeight, // aspect ratio
    0.1, // near clipping plane
    1000 // far clipping plane
  );

  // Create a renderer
  let renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  // Create a box geometry
  let boxGeometry = new THREE.BoxGeometry(1.5, 1.5, 1.5);

  // Create a material for the box
  let material = new THREE.MeshBasicMaterial({ color: 0x0000ff });

  // Create a mesh for the box
  let box = new THREE.Mesh(boxGeometry, material);
  scene.add(box);

  // Create a raycaster
  let raycaster = new THREE.Raycaster();

  // Create a mouse vector
  let mouse = new THREE.Vector2();

  // Add an event listener for mouse movements
  document.addEventListener('mousemove', event => {
    // Calculate the mouse position normalized to the screen
    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

    // Update the raycaster with the mouse position
    raycaster.setFromCamera(mouse, camera);

    // Check for intersections between the raycaster and the box
    let intersects = raycaster.intersectObject(box);

    // If there is an intersection, change the box color
    if (intersects.length > 0) {
      box.material.color.set(0xff00ff);
      // box.material.color = new THREE.Color(0xffffff * Math.random());
    } else {
      box.material.color.set(0x0000ff);
    }
  });

  // Set the camera position
  camera.position.z = 5;

  window.addEventListener("resize", function () {
    renderer.setSize(window.innerWidth, window.innerHeight);
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.render(scene, camera);
  });

  // Render the scene
  (function render() {
    requestAnimationFrame(render);
    renderer.render(scene, camera);
  })();
</script>
</body>
</html>
