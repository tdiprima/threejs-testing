<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <!-- https://youtu.be/_TtVdWAc9Sc -->
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <script type="module">
    import * as THREE from "/build/three.module.js"

    let aspect = window.innerWidth / window.innerHeight; // cam aspect ratio (width:height)
    let insetWidth, insetHeight; // width and height of overhead cam viewport

    let scene = new THREE.Scene();

    // CAMERA
    // CAM #1 - behind player; take up whole screen.
    let camera = new THREE.PerspectiveCamera(
      70, // field of view in vertical degrees
      aspect, // aspect ratio: ratio of image width to height
      0.01, // near: distance from camera object starts to appear
      500 // far: distance from camera objects stop appearing
    );

    camera.position.z = 10; // move 10 units behind origin
    camera.position.y = 2; // move 2 units up

    camera.lookAt(0, 0, 0); // point camera to this x, y, z position

    camera.name = "PlayerCam"; // easy to identify

    // CAM #2 - overhead cam
    let cameraTop = new THREE.PerspectiveCamera(
      90, // field of view
      aspect, // aspect ratio
      0.01, // near
      500 // far
    );

    cameraTop.position.set(0, 10, 0); // move 10 units above origin
    cameraTop.lookAt(0, 0, -10); // reverse 10 from camera #1 (1:37)

    cameraTop.name = "OverheadCam";

    camera.add(cameraTop); // camera (CAM #1) is parent to cameraTop (CAM #2)

    scene.add(camera); // add camera (parent-camera and child-cameraTop) to scene

    let geometry = new THREE.BoxGeometry(10.2, 0.2, 0.2);
    let material = new THREE.MeshNormalMaterial();

    let mesh = new THREE.Mesh(geometry, material);
    scene.add(mesh);

    // RESIZE HANDLER FOR BOTH CAMERAS
    function resize() {
      // for CAM#1 - player cam
      camera.aspect = window.innerWidth / window.innerHeight; // update aspect ratio
      camera.updateProjectionMatrix(); // update projection that contains matrix CAM#1
      renderer.setSize(window.innerWidth, window.innerHeight);

      // for CAM#2 - overhead cam
       // ***** dimensions of overhead cam viewport (length & width = 25% of height)
      insetWidth = window.innerHeight / 4; // control width of mini viewer
      insetHeight = window.innerHeight / 4; // control height of mini viewer

      cameraTop.aspect = insetWidth / insetHeight; // aspect ratio of CAM#2 - overhead cam
      cameraTop.updateProjectionMatrix(); // update projection that contains matrix CAM#2

    }

    resize(); // check if window resizes
    window.addEventListener("resize", resize);

    function animate() {

    }

    animate(); // animate movement
  </script>
</body>
</html>
