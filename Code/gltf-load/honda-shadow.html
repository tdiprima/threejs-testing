<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Honda Shadow RS 2010</title>
  <link href="/css/main.css" rel="stylesheet">
  <!-- https://sketchfab.com/3d-models/honda-shadow-rs-2010-2e7cf7bc195044f4a0f60c04581e2691 -->
  <!-- https://sketchfab.com/models/2e7cf7bc195044f4a0f60c04581e2691/embed?autostart=1&internal=1&tracking=0&ui_ar=0&ui_infos=0&ui_snapshots=1&ui_stop=0&ui_theatre=1&ui_watermark=0 -->
</head>
<body>

<div id="info">directionalLight &amp; hemisphereLight</div>

<script type="module">
  import * as THREE from "https://threejsfundamentals.org/threejs/resources/threejs/r132/build/three.module.js";
  import { GLTFLoader } from "https://threejsfundamentals.org/threejs/resources/threejs/r132/examples/jsm/loaders/GLTFLoader.js";
  import { OrbitControls } from "https://threejsfundamentals.org/threejs/resources/threejs/r132/examples/jsm/controls/OrbitControls.js";
  console.log("%cthree.js rev", "color: #ccff00;", THREE.REVISION);

  let scene = new THREE.Scene();
  let color1 = new THREE.Color("#686868");
  let color2 = new THREE.Color("#151515");
  // TODO: Set texture, with gradient.
  scene.background = new THREE.Color(color1);

  let camera = window._camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
  );
  // camera.position.set(1.5, 1.5, 2.25);
  camera.position.set(1.2, 1.5, 0.12);

  let clock = new THREE.Clock();

  let renderer = new THREE.WebGLRenderer();
  renderer.setPixelRatio(window.devicePixelRatio);
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  let controls = new OrbitControls(camera, renderer.domElement);

  // TODO: ENHANCE LIGHTING
  // How Lighting (Basically) Works in Games https://youtu.be/VXggMZvqSvM

  // createLights();
  // createLights1();
  createLights2();

  new GLTFLoader().load("/models/gltf/honda_shadow_rs_2010.glb", gltf => {
    // console.log("gltf.animations", gltf.animations); // empty array; KSD
    const mesh = gltf.scene.children[0];
    mesh.position.y = -0.5;

    mesh.castShadow = true;
    mesh.receiveShadow = true;

    scene.add( mesh );
  });

  function createLights() {
    // https://discoverthreejs.com/book/first-steps/ambient-lighting/
    const ambientLight = new THREE.AmbientLight('white', 2);

    const mainLight = new THREE.DirectionalLight('white', 5);
    mainLight.position.set(10, 10, 10);

    scene.add(ambientLight, mainLight);
  }

  function createLights1() {
    // https://threejs.org/examples/webgl_lights_hemisphere.html
    const hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.6 );
    hemiLight.color.setHSL( 0.6, 1, 0.6 );
    hemiLight.groundColor.setHSL( 0.095, 1, 0.75 );
    hemiLight.position.set( 0, 50, 0 );
    scene.add( hemiLight );

    const hemiLightHelper = new THREE.HemisphereLightHelper( hemiLight, 10 );
    scene.add( hemiLightHelper );

    const dirLight = new THREE.DirectionalLight( 0xffffff, 1 );
    dirLight.color.setHSL( 0.1, 1, 0.95 );
    dirLight.position.set( - 1, 1.75, 1 );
    dirLight.position.multiplyScalar( 30 );
    scene.add( dirLight );

    dirLight.castShadow = true;

    dirLight.shadow.mapSize.width = 2048;
    dirLight.shadow.mapSize.height = 2048;

    const d = 50;

    dirLight.shadow.camera.left = - d;
    dirLight.shadow.camera.right = d;
    dirLight.shadow.camera.top = d;
    dirLight.shadow.camera.bottom = - d;

    dirLight.shadow.camera.far = 3500;
    dirLight.shadow.bias = - 0.0001;

    const dirLightHelper = new THREE.DirectionalLightHelper( dirLight, 10 );
    scene.add( dirLightHelper );
  }

  function createLights2() {
    // https://discoverthreejs.com/book/first-steps/ambient-lighting/

    // skyColor, groundColor, intensity
    let hemisphereLight = new THREE.HemisphereLight(
      "white", // bright sky color
      "darkslategrey", // dim ground color
      1.5, // intensity
    );

    // color, intensity
    let mainLight = new THREE.DirectionalLight("white", 1.25);
    mainLight.position.set(10, 10, 10);

    scene.add(hemisphereLight, mainLight);
  }

  /* Resize Event */
  window.addEventListener("resize", function () {
    renderer.setSize(window.innerWidth, window.innerHeight);
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.render(scene, camera);
  });

  /* Animate */
  (function animate() {
    requestAnimationFrame(animate);
    controls.update();
    renderer.render(scene, camera);
  })();
</script>
</body>
</html>
